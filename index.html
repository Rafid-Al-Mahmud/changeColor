<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"></script> -->
  <title>Color Changer</title>
  <style>
      #box{
      display: flex;
      padding: 5px;
      margin: 10px;
      /*box-shadow: 0 0 10px 5px #eeea;*/
      /*border-radius: 10px;*/
      flex-wrap: wrap;
      align-items: center;
      justify-content: center;
    }
    #box>div{
      display: flex;
      padding: 5px;
      margin: 10px;
      box-shadow: 0 0 10px 5px #eeea;
      width: 100px;
      height: 100px;
      border-radius: 10px;
      flex-wrap: wrap;
      align-items: center;
      justify-content: center;
    }
    #box>div:hover{
      cursor: pointer;
    }
    button{
      display: flex;
      padding: 5px;
      margin: 10px;
      box-shadow: 0 0 10px 5px #eeea;
      background-color: #0d6efd;
      color:#fff;
      border: none;
      width: 100px;
      border-radius: 2px;
      flex-wrap: wrap;
      align-items: center;
      justify-content: center;
    }
    button:hover{background-color: #0a58ca;cursor: pointer;}
  </style>
</head>

<body>
  <h1 style="text-align: center">Color Controller</h1>
  <form action="/register" method="POST">
    <!--<div>
      <label>Colour Name: </label>
      <input type="text" oninput="changeColor(this.value)"/>
    </div>-->
    <div>
      <label for="bg">Colour Name: </label>
      <input type="color" id="bg" name="bg" />
    </div>
    <button type="submit">Change</button>
  </form>
  <h3>Change Colors<br><span style="color:gray;">(By Click)</span></h3>
  <h4>Default Colors:</h4>
  <div id="box" style="display: flex;flex-wrap: wrap">
    <div onclick="changeColor('#ff0000')" style="background-color: #ff0000;">RED</div>
    <div onclick="changeColor('#008000')" style="background-color: #008000;">GREEN</div>
    <div onclick="changeColor('#0000ff')" style="background-color: #0000ff;">BLUE</div>
    <div onclick="changeColor('#ffa500')" style="background-color: #ffa500;">ORANGE</div>
    <div onclick="changeColor('#ee82ee')" style="background-color: #ee82ee;">VIOLET</div>
    <div onclick="changeColor('#ffc0cb')" style="background-color: #ffc0cb;">PINK</div>
    <div onclick="changeColor('#000000')" style="background-color: #000000;">BLACK</div>
    <div onclick="changeColor('#ffffff')" style="background-color: #ffffff;">WHITE</div>
    <div onclick="changeColor('#808080')" style="background-color: #808080;">GRAY</div>
  </div>
  <h4>Tailwind Colors:</h4>
  <div id="box" style="display: flex;flex-wrap: wrap">
    <div onclick="changeColor('#ff0000')" style="background-color: #ff0000;">RED</div>
    <div onclick="changeColor('#008000')" style="background-color: #008000;">GREEN</div>
    <div onclick="changeColor('#0000ff')" style="background-color: #0000ff;">BLUE</div>
    <div onclick="changeColor('#ffa500')" style="background-color: #ffa500;">ORANGE</div>
    <div onclick="changeColor('#ee82ee')" style="background-color: #ee82ee;">VIOLET</div>
    <div onclick="changeColor('#ffc0cb')" style="background-color: #ffc0cb;">PINK</div>
    <div onclick="changeColor('#000000')" style="background-color: #000000;">BLACK</div>
    <div onclick="changeColor('#ffffff')" style="background-color: #ffffff;">WHITE</div>
    <div onclick="changeColor('#808080')" style="background-color: #808080;">GRAY</div>
  </div>
  <script>
var getContrastYIQ = function(color) {
  var hex = '#';
  var r, g, b;
  if (color.indexOf(hex) > -1) {
    r = parseInt(color.substr(1, 2), 16);
    g = parseInt(color.substr(3, 2), 16);
    b = parseInt(color.substr(5, 2), 16);
  } else {
    color = color.match(/\d+/g);
    r = color[0];
    g = color[1];
    b = color[2];
  }

  var yiq = ((r * 299) + (g * 587) + (b * 114)) / 1000;
  return (yiq >= 128) ? 'black' : 'white';
}

var r = document.querySelectorAll("#box>div");
for (var i = 0; i < r.length; i++) {
    r[i].style.color = getContrastYIQ(r[i].style.backgroundColor);
}

var pbg = "";
var cbg = document.getElementsByName("bg")[0].value;
    function changeColor(color_name) {
      var els = document.getElementsByName("bg");
      for (var i = 0; i < els.length; i++) {
        els[i].value = color_name;
        cbg=els[i].value;
      }
      //document.querySelector("button[type=submit]").click();
    }
    //setTimeout(function(){alert(cbg)},5000)
function loadDoc(x){
    const xhttp = new XMLHttpRequest();
        xhttp.onload = function() {
        //document.getElementById("demo").innerHTML = this.responseText;
    }
    xhttp.open("POST", x);
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhttp.send("bg="+document.getElementsByName("bg")[0].value);
    pbg=cbg;
}
setInterval(() => {if(pbg!==cbg) loadDoc("/register")}, 0);
  </script>
</body>

</html>
